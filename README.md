
<h1 align="center">RuviClass API</h1>

<div align="center">
  :steam_locomotive::train::train::train::train::train:
</div>
<div align="center">
  <strong>Fun functional programming</strong>
</div>
<div align="center">
  A classroom response system (CRS) for your institution.
</div>

<br />

<div align="center">
  <!-- Stability -->
  <a href="https://nodejs.org/api/documentation.html#documentation_stability_index">
    <img src="https://img.shields.io/badge/stability-experimental-orange.svg?style=flat-square"
      alt="API stability" />
  </a>
  <!-- NPM version -->
  <a href="https://npmjs.org/package/choo">
    <img src="https://img.shields.io/npm/v/choo.svg?style=flat-square"
      alt="NPM version" />
  </a>
  <!-- Build Status -->
  <a href="https://travis-ci.org/choojs/choo">
    <img src="https://img.shields.io/travis/choojs/choo/master.svg?style=flat-square"
      alt="Build Status" />
  </a>
  <!-- Test Coverage -->
  <a href="https://codecov.io/github/choojs/choo">
    <img src="https://img.shields.io/codecov/c/github/choojs/choo/master.svg?style=flat-square" 
      alt="Test Coverage" />
  </a>
  <!-- Downloads -->
  <a href="https://npmjs.org/package/choo">
    <img src="https://img.shields.io/npm/dt/choo.svg?style=flat-square" 
      alt="Download" />
  </a>
  <!-- Chat -->
  <a href="https://gitter.im/array-mixer/Lobby?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge">
    <img src="https://badges.gitter.im/array-mixer/Lobby.svg" 
      alt ="Gitter">
  </a>
  <!-- License -->
  <a href="https://opensource.org/licenses/MIT">
    <img src="https://img.shields.io/badge/license-MIT-blue.svg" 
      alt="MIT">
  </a>
</div>


<div align="center">
  <h3>
  <a href="#">
      Website
    </a>
    <span> | </span>
    <a href="#">
      Frontend
    </a>
    <span> | </span>
    <a href="#">
      User Manual
    </a>
    <span> | </span>
    <a href="https://github.com/choojs/choo/blob/master/.github/CONTRIBUTING.md">
      Contributing
    </a>
    <span> | </span>
    <a href="#">
      Chat
    </a>
  </h3>
</div>

<div align="center">
  <sub>An innovative software for education and learning. Built with ❤︎ by
  <a href="https://twitter.com/yoshuawuyts">Cristian Flores</a> and
  <a href="https://github.com/choojs/choo/graphs/contributors">
    Contributors
  </a>
</div>

## Table of Contents 

- [Introduction](#introduction)
- [Features](#features)
- [Feedback](#feedback)
- [Contributors](#contributors)
- [Build Process](#build-process)
- [Backers](#backers-)
- [Sponsors](#sponsors-)
- [Acknowledgments](#acknowledgments)

## Overview

This is a REST API in Node.js using ES6 and Express. Intended for use with Postgres using node-postgres.

## 📦 Requirements & Installation 

```
npm install
```
```
node serve.js
```
```
npm run dev
```

## 🎨 Features

 Package            | Feature                        |  Sumary
--------------------|--------------------------------|----------------------------------
 bcrypt-nodejs      | --                             | Used to hash user's password before saving it into the DB.    
 colors             | --                             | --
 cors               | --                             | --
 express-validator  | API parameter validation       |  Validate body, params, query, headers and cookies of a request (via middleware) and return a response with errors; if any of the configured validation rules fail. You won't anymore need to make your route handler dirty with such validations.
 jsonwebtoken       | Authentication                 | Used to generate and verify authentication tokens.
 moment             | --                             | --
 nodemon            | Auto server restart            | Restart the server in real-time anytime an edit is made.
 pg                 | --                             | --
 socket&#46;io      | --                             | --
 --                 | Code linting                   | --
 uuid               | --                             | --

 VSCode Extension | Description
------------------|------------------------
 .editorconfig    | It helps developers define and maintain consistent coding styles between different editors and IDEs.

## 📙 Documentation

- [RuviClass API Doc](#) - RuviClass API REST Documentation.

## 💬 FAQ

### Why is it called RuviClass?
Because I thought it sounded cute. All these programs talk about being
_"performant"_, _"rigid"_, _"robust"_ - I like programming to be light, fun and
non-scary. Choo embraces that.

## 🚀 Used by

<p align="center">
       <img src="https://dl.dropboxusercontent.com/s/yp3kwu2lobe9pvg/who-uses-sdversion.png?dl=0" alt="Who uses SDVersion">
</p>

## 📚 See Also

- [RuviClass Client](https://github.com/choojs/bankai) - RuviClass Client repository.
- [FlavioCopes Blog](https://flaviocopes.com/) - Node.js, Express.js, REST API Backend by Postgres and much more.
- [CharlieTheProgrammer](https://charlietheprogrammer.com/) - Updated Node.js tutorials.
- [Spanish Express.js Guide](http://expressjs.com/es/guide) - Official Guide.
- [Node University](https://node.university/courses) - Premium Beginner/Advanced Courses.
- [Node Express Boilerplate](https://github.com/kunalkapadia/express-mongoose-es6-rest-api) - Express.js Boilerplate.
- [Node Best Practices](https://github.com/i0natan/nodebestpractices)

## 🤝 Contributing

We love contributions! Check out the [Contribution Guide](https://github.com/sourcerer-io/sourcerer-app/blob/master/CONTRIBUTING.md) for more information.

## 🎁 Support

Creating a quality framework takes a lot of time. Unlike others frameworks, RuviClass is completely independently funded. We fight for our users. This does mean however that we also have to spend time working contracts to pay the bills. This is where you can help: by chipping in you can ensure more time is spent improving RuviClass rather than dealing with distractions.

### Backers 
Become a backer, and buy us a coffee (or perhaps lunch?) every month or so. [Become a backer](https://opencollective.com/choo#backer)
Thank you to all our backers! 🙏

<a href="https://opencollective.com/choo/backer/0/website" target="_blank"><img src="https://opencollective.com/choo/backer/0/avatar.svg"></a>
<a href="https://opencollective.com/choo/backer/10/website" target="_blank"><img src="https://opencollective.com/choo/backer/10/avatar.svg"></a>

### Sponsors
Become a sponsor and help ensure the development of independent quality software. You can help us keep the lights on, bellies full and work days sharp and focused on improving the state of the web. [Become a sponsor](https://opencollective.com/choo#sponsor)

Support this project by becoming a sponsor. Your logo will show up here with a link to your website.

<a href="https://opencollective.com/choo/sponsor/0/website" target="_blank"><img src="https://opencollective.com/choo/sponsor/0/avatar.svg"></a>
<a href="https://opencollective.com/choo/sponsor/1/website" target="_blank"><img src="https://opencollective.com/choo/sponsor/1/avatar.svg"></a>

## ❤️ Acknowledgments
Thanks to:
- [JetBrains](https://www.jetbrains.com) for supporting us with a [Free Open Source License](https://www.jetbrains.com/buy/opensource).

## 🎓 License
Usage is provided under the [MIT©](https://tldrlegal.com/license/mit-license) License.

## Consultas

```sql

SELECT m.name, c.id_class, c.id_module, c.description, c.status, c.date, c.created_at, c.updated_at
FROM modules AS m
INNER JOIN (
  SELECT id_class, id_module, description, status, date, created_at, updated_at 
  FROM classes
  WHERE id_module IN( 
    SELECT id_module 
    FROM modules 
    WHERE id_course = 2
  )
) AS c
ON m.id_module = c.id_module;

```

Personalizar los logs:
https://github.com/pinojs/pino?fbclid=IwAR0YlQK9TC183FdLcIDIE7XpzIZhtHS8H27uTUp5uInDgJ_JdfXAQsUVz6E

Implementar un console.table personalizado:
https://codereview.stackexchange.com/questions/157402/implementing-console-table-in-javascript
https://stackoverflow.com/questions/17224130/formatting-text-with-tabs-or-spaces/17252151

### Bug1: Inicio de sesión con sesión en el localstorage

En Firefox funciona bien
pero en chrome envia login al socket pero hace reedireccionamiento al login siendo que la sesion existe.

¿Quien hace el reedireccionamiento?
Los `this.router.navigate(['/login']);`
...

Si recargo la página recién iniciada la sesión si funciona.
Ejemplo: http://localhost:4200/admin

Si cierro chrome y vuelvo a entrar a la url: http://localhost:4200/admin también funciona.

¿En alguna parte se verificará la expiración del token?
Esto se verifica siempre desde el servidor. Para verificar en el cliente sería necesario el SEED pero 
por razones de seguridad no se recomienda.

### Bug 2: 
Prueba de usuarios:
profesor:
admin@admin.com
admin

estudiante1:
estudiante@estudiante.com
1234

estudiante2:
estudiante2@estudiante2.com
1234


### Bug3: Crear un file log con métodos


```ts
const PAD_START = 10

function logInfo(message: string){
  console.log(`${colors.cyan.bold('[SOCKET]'.padStart(PAD_START))} ${message}`);
}

function logSocket(message: string){
  console.log(`${colors.cyan.bold('[SOCKET]'.padStart(PAD_START))} ${message}`);
}

function logConnect(message: string){
  console.log(`${colors.cyan.bold('[SOCKET]'.padStart(PAD_START))} ${message}`);
}
```

### Bug4: Login con sesión iniciada

Si me voy al login teniendo una sesión iniciada, realizar la reedirección al dashboard correspondiente.

### Bug5: Socket LoggedIn Emitido
Cuando me voy al dashboard y el token esta vencido realiza el reedireccionamiento al login pero de igual manera emite el evento socket...

### Bug6: Cuando inicio clase sale 2 notificaciones

